---
project: neko-master
stars: 1350
description: |-
    A modern and elegant dashboard for network traffic visualization and analysis.
url: https://github.com/foru17/neko-master
---

<p align="center">
  <img src="./assets/icon-neko-master.png" width="200" alt="Neko Master Logo" style="margin-bottom: 16px;">
  <br>
  <b style="font-size: 32px;">Neko Master</b>
</p>

<p align="center">
  <b>è®©ä½ çš„ç½‘ç»œæµé‡ä¸€ç›®äº†ç„¶ã€‚</b><br>
  <span>å®æ—¶ç›‘æ§ Â· æµé‡å®¡è®¡ Â· å¤šç½‘å…³ç®¡ç†</span>
</p>

<p align="center">
   <b>ä¸­æ–‡ | <a href="./README.en.md">English</a></b>
</p>

<p align="center">
  <a href="https://github.com/foru17/neko-master/stargazers"><img src="https://img.shields.io/github/stars/foru17/neko-master?style=flat-square&color=yellow" alt="Stars"></a>
  <a href="https://hub.docker.com/r/foru17/neko-master"><img src="https://img.shields.io/docker/pulls/foru17/neko-master?style=flat-square&color=blue&logo=docker" alt="Docker Pulls"></a>
  <a href="https://hub.docker.com/r/foru17/neko-master"><img src="https://img.shields.io/docker/v/foru17/neko-master?style=flat-square&label=Docker&color=2496ED" alt="Docker Version"></a>
  <a href="https://hub.docker.com/r/foru17/neko-master"><img src="https://img.shields.io/docker/image-size/foru17/neko-master/latest?style=flat-square&logo=docker" alt="Image Size"></a>
  <a href="https://github.com/foru17/neko-master/blob/main/LICENSE"><img src="https://img.shields.io/github/license/foru17/neko-master?style=flat-square&color=green" alt="License"></a>
  <img src="https://img.shields.io/badge/Node.js-22-339933?style=flat-square&logo=node.js">
  <a href="https://github.com/foru17/neko-master/actions/workflows/docker-build.yml"><img src="https://img.shields.io/github/actions/workflow/status/foru17/neko-master/docker-build.yml?style=flat-square&label=Docker%20CI" alt="Docker CI"></a>
  <a href="./docs/architecture.md"><img src="https://img.shields.io/badge/docs-architecture-0ea5e9?style=flat-square" alt="Architecture Docs"></a>
</p>

> [!IMPORTANT]
> **å…è´£å£°æ˜**
>
> æœ¬é¡¹ç›®ä¸º **ç½‘ç»œæµé‡åˆ†æä¸å¯è§†åŒ–å·¥å…·**ï¼Œ
> ç”¨äºå±•ç¤ºä¸ç»Ÿè®¡æœ¬åœ°ç½‘å…³çš„æµé‡æ•°æ®ã€‚
>
> æœ¬é¡¹ç›® **ä¸æä¾›ä»»ä½•ç½‘ç»œæ¥å…¥æœåŠ¡ã€ä»£ç†è®¢é˜…æˆ–è·¨ç½‘ç»œè¿æ¥åŠŸèƒ½**ã€‚
> æ‰€æœ‰æ•°æ®å‡æ¥æºäºç”¨æˆ·è‡ªæœ‰ç½‘ç»œç¯å¢ƒã€‚
>
> æœ¬é¡¹ç›®éµå¾ª MIT åè®®å¼€æºï¼Œä¸å¯¹å› ä½¿ç”¨æœ¬è½¯ä»¶äº§ç”Ÿçš„ä»»ä½•åæœæ‰¿æ‹…è´£ä»»ã€‚è¯·åœ¨åˆè§„èŒƒå›´å†…ä½¿ç”¨ã€‚

<table>
  <tr>
    <td align="center" width="50%">
      <img src="./assets/neko-master-overview-light.png" alt="Neko Master Preview (Light 1)" />
    </td>
    <td align="center" width="50%">
      <img src="./assets/neko-master-regions-light.png" alt="Neko Master Preview (Light 2)" />
    </td>
  </tr>
  <tr>
    <td align="center" width="50%">
      <img src="./assets/neko-master-rules-dark.png" alt="Neko Master Preview (Dark 1)" />
    </td>
    <td align="center" width="50%">
      <img src="./assets/neko-master-domains-dark.png" alt="Neko Master Preview (Dark 2)" />
    </td>
  </tr>
</table>

## ğŸŒ åœ¨çº¿æ¼”ç¤º

**æ¼”ç¤ºåœ°å€**: https://neko-master.is26.com  
**è®¿é—®å¯†ç **: `neko2026`

> æ¼”ç¤ºç«™ä¸ºåªè¯»å±•ç¤ºæ¨¡å¼ï¼Œéƒ¨åˆ†åŠŸèƒ½å—é™ã€‚

## å…³äºåç§°

**Neko**ï¼ˆã­ã“ï¼‰åœ¨æ—¥è¯­ä¸­æ„ä¸ºâ€œçŒ«â€ï¼Œ
å‘éŸ³ä¸º **/ËˆneÉªkoÊŠ/**ï¼ˆNEH-koï¼‰ã€‚

å¦‚åŒçŒ«ä¸€èˆ¬å®‰é™è€Œæ•é”ï¼Œ
Neko Master ä¸“æ³¨äºå¯¹ç½‘ç»œæµé‡è¿›è¡Œè½»é‡ã€ç²¾ç¡®çš„åˆ†æä¸å¯è§†åŒ–ã€‚

## ğŸ“‹ ç›®å½•

- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ¤– Agent éƒ¨ç½²](#-agent-éƒ¨ç½²)
- [ğŸ“– é¦–æ¬¡ä½¿ç”¨](#-é¦–æ¬¡ä½¿ç”¨)
- [ğŸ”§ ç«¯å£å†²çªè§£å†³](#-ç«¯å£å†²çªè§£å†³)
- [ğŸ³ Docker é…ç½®](#-docker-é…ç½®)
- [ğŸ—„ï¸ ClickHouseï¼ˆå¯é€‰ï¼‰](#-clickhouse-å¯é€‰)
- [ğŸŒ åå‘ä»£ç†ä¸ Tunnel](#-åå‘ä»£ç†ä¸-tunnel)
- [ğŸ” è®¤è¯ä¸å®‰å…¨](#-è®¤è¯ä¸å®‰å…¨)
- [â“ å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [ğŸ—ï¸ æ¶æ„æ–‡æ¡£æŒ‡å¼•](#-æ¶æ„æ–‡æ¡£æŒ‡å¼•)
- [ğŸ¤ åé¦ˆä¸ Issue](#-åé¦ˆä¸-issue)
- [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸ› ï¸ æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [ğŸ“ æ›´æ–°æ—¥å¿—](./CHANGELOG.md)
- [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èï¼‰

> ä»“åº“å†…ç½®çš„ `docker-compose.yml` é»˜è®¤æ˜ å°„ `3000/3001/3002`ã€‚  
> ä¸‹æ–¹åœºæ™¯ A/B æ˜¯æ›´ç²¾ç®€çš„å¸¸è§éƒ¨ç½²æ¨¡æ¿ï¼Œå¯æŒ‰éœ€é€‰æ‹©ã€‚

#### åœºæ™¯ Aï¼šæœ€ç®€éƒ¨ç½²ï¼ˆä»…æš´éœ² 3000ï¼‰

```yaml
services:
  neko-master:
    image: foru17/neko-master:latest
    container_name: neko-master
    restart: unless-stopped
    ports:
      - "3000:3000" # Web UI
    volumes:
      - ./data:/app/data
      # æœ¬åœ° MMDBï¼ˆå¯é€‰ï¼Œæ–‡ä»¶éœ€è‡ªè¡Œä¸‹è½½å¹¶æ”¾åˆ° ./geoipï¼‰
      - ./geoip:/app/data/geoip:ro
    environment:
      - NODE_ENV=production
      - DB_PATH=/app/data/stats.db
      - COOKIE_SECRET=${COOKIE_SECRET}
```

> å»ºè®®åœ¨ `docker-compose.yml` åŒç›®å½•çš„ `.env` ä¸­é…ç½®ï¼š  
> `COOKIE_SECRET=<è‡³å°‘32å­—èŠ‚éšæœºå­—ç¬¦ä¸²>`ï¼ˆå¯ç”¨ `openssl rand -hex 32` ç”Ÿæˆï¼‰

> è¯¥æ¨¡å¼å®Œå…¨å…¼å®¹å‡çº§ï¼Œé¡µé¢å¯ç”¨ã€‚  
> æœªæ‰“é€š WS æ—¶ä¼šè‡ªåŠ¨å›é€€åˆ° HTTP è½®è¯¢åˆ·æ–°ã€‚

#### åœºæ™¯ Bï¼šå®æ—¶ WebSocketï¼ˆæ¨èï¼Œé…åˆåå‘ä»£ç†ï¼‰

```yaml
services:
  neko-master:
    image: foru17/neko-master:latest
    container_name: neko-master
    restart: unless-stopped
    ports:
      - "3000:3000" # Web UI
      - "3002:3002" # WebSocketï¼ˆä¾› Nginx / Tunnel è½¬å‘ï¼‰
    volumes:
      - ./data:/app/data
      # æœ¬åœ° MMDBï¼ˆå¯é€‰ï¼Œæ–‡ä»¶éœ€è‡ªè¡Œä¸‹è½½å¹¶æ”¾åˆ° ./geoipï¼‰
      - ./geoip:/app/data/geoip:ro
    environment:
      - NODE_ENV=production
      - DB_PATH=/app/data/stats.db
      - COOKIE_SECRET=${COOKIE_SECRET}
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
docker compose up -d
```

è®¿é—® <http://localhost:3000>

è‹¥ä½ ç›´æ¥ä½¿ç”¨ä»“åº“å†…ç½® Compose æ–‡ä»¶ï¼ˆé»˜è®¤æš´éœ² `3000/3001/3002`ï¼‰ï¼Œæ‰§è¡ŒåŒä¸€å‘½ä»¤å³å¯ã€‚

### æ–¹å¼äºŒï¼šDocker ç›´æ¥è¿è¡Œ

```bash
# å»ºè®®å…ˆç”Ÿæˆå›ºå®š Cookie å¯†é’¥ï¼ˆç”¨äºä¼šè¯æŒä¹…ï¼‰
export COOKIE_SECRET="$(openssl rand -hex 32)"
```

```bash
# æœ€ç®€ï¼ˆä»… 3000ï¼‰
docker run -d \
  --name neko-master \
  -p 3000:3000 \
  -v $(pwd)/data:/app/data \
  -e COOKIE_SECRET="$COOKIE_SECRET" \
  --restart unless-stopped \
  foru17/neko-master:latest

# å®æ—¶ WSï¼ˆé…åˆåä»£ï¼‰
docker run -d \
  --name neko-master \
  -p 3000:3000 \
  -p 3002:3002 \
  -v $(pwd)/data:/app/data \
  -e COOKIE_SECRET="$COOKIE_SECRET" \
  --restart unless-stopped \
  foru17/neko-master:latest
```

> é»˜è®¤å‰ç«¯ API èµ°åŒåŸŸ `/api`ï¼Œé€šå¸¸ä¸éœ€è¦é¢å¤–æš´éœ² 3001ã€‚  
> è‹¥å¸Œæœ› WebSocket å®æ—¶ç”Ÿæ•ˆï¼Œéœ€è¦è®©åä»£å±‚å¯ä»¥è®¿é—® `3002`ï¼›æœªæ‰“é€šæ—¶ä¼šå›é€€åˆ° HTTP è½®è¯¢ï¼ˆçº¦ 5 ç§’çº§ï¼‰ã€‚

è®¿é—® <http://localhost:3000>

> `docker run` ä¿®æ”¹å¤–éƒ¨ç«¯å£æ—¶ï¼Œç›´æ¥æ”¹ `-p` æ˜ å°„å³å¯ã€‚  
> ä»…åœ¨â€œéåä»£ç›´è¿ WS ä¸”å¤–éƒ¨ WS ç«¯å£ä¸æ˜¯ 3002â€æ—¶ï¼Œé¢å¤–ä¼ å…¥ `-e WS_EXTERNAL_PORT=<å¤–éƒ¨WSç«¯å£>`ã€‚
>
> æœ¬åœ° MMDB æŸ¥è¯¢æ¨¡å¼ï¼ˆå¯é€‰ï¼‰ï¼šé¢å¤–æŒ‚è½½ `-v $(pwd)/geoip:/app/data/geoip:ro`ï¼Œ
> å¹¶åœ¨é¢æ¿ã€Œè®¾ç½® -> åå¥½è®¾ç½® -> IP æŸ¥è¯¢æ¥æºã€åˆ‡æ¢åˆ°æœ¬åœ°ã€‚

### æ–¹å¼ä¸‰ï¼šä¸€é”®è„šæœ¬

è‡ªåŠ¨æ£€æµ‹ç«¯å£å†²çªå¹¶é…ç½®ï¼Œé€‚åˆä¸ç†Ÿæ‚‰ Docker çš„ç”¨æˆ·ï¼š

```bash
# ä½¿ç”¨ curl
curl -fsSL https://raw.githubusercontent.com/foru17/neko-master/main/setup.sh | bash

# æˆ–ä½¿ç”¨ wget
wget -qO- https://raw.githubusercontent.com/foru17/neko-master/main/setup.sh | bash
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- âœ… ä¸‹è½½ `docker-compose.yml`
- âœ… æ£€æµ‹é»˜è®¤ç«¯å£ï¼ˆ3000/3001/3002ï¼‰æ˜¯å¦è¢«å ç”¨
- âœ… æä¾›å¯ç”¨çš„æ›¿ä»£ç«¯å£
- âœ… åˆ›å»ºé…ç½®æ–‡ä»¶å¹¶å¯åŠ¨æœåŠ¡

### æ–¹å¼å››ï¼šæºç è¿è¡Œ

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/foru17/neko-master.git
cd neko-master

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. å‡†å¤‡ collector ç¯å¢ƒå˜é‡ï¼ˆæºç æ¨¡å¼è¯»å– apps/collector/.envï¼‰
cp apps/collector/.env.example apps/collector/.env

# 4. å¯åŠ¨å¼€å‘æœåŠ¡
pnpm dev
```

è®¿é—® <http://localhost:3000>

> æºç æ¨¡å¼ä¸‹ï¼š`collector` é»˜è®¤ç›‘å¬ `3001/3002`ï¼Œ`web` é»˜è®¤ç›‘å¬ `3000`ã€‚  
> å¦‚æœä½ ä¿®æ”¹äº† `API_PORT`ï¼ˆé 3001ï¼‰ï¼Œè¯·åŒæ­¥è®¾ç½® `API_URL`ï¼ˆä¾‹å¦‚ `API_URL=http://localhost:4001`ï¼‰ä¾› web çš„ `/api` è½¬å‘ä½¿ç”¨ã€‚  
> `apps/collector/.env.local` çš„ä¼˜å…ˆçº§é«˜äº `apps/collector/.env`ã€‚

## ğŸ¤– Agent éƒ¨ç½²

å½“ä½ å¸Œæœ›ä¸­å¿ƒåŒ–éƒ¨ç½²ä¸€ä¸ª Neko Master æœåŠ¡ï¼Œå¹¶åœ¨ä¸åŒè®¾å¤‡ï¼ˆOpenWrtã€Linuxã€macOSï¼‰æœ¬åœ°é‡‡é›†ç½‘å…³æ•°æ®æ—¶ï¼Œæ¨èä½¿ç”¨ Agent æ¨¡å¼ã€‚Agent è¿è¡Œåœ¨ç½‘å…³æ—è¾¹ï¼Œä¸»åŠ¨æ‹‰å–æ•°æ®å¹¶ä¸ŠæŠ¥è‡³é¢æ¿ï¼Œé¢æ¿æ— éœ€ä¸»åŠ¨è¿æ¥ç½‘å…³ã€‚

æ”¯æŒç½‘å…³ç±»å‹ï¼š**Clash / Mihomo**ï¼ˆWebSocket å®æ—¶ï¼‰å’Œ **Surge v5+**ï¼ˆHTTP è½®è¯¢ï¼‰ã€‚

### å¿«é€Ÿå®‰è£…ï¼ˆUI ç”Ÿæˆå‘½ä»¤ï¼‰

1. åœ¨é¢æ¿ã€Œè®¾ç½® â†’ åç«¯ã€ä¸­æ·»åŠ ä¸€ä¸ª `Agent` ç±»å‹åç«¯ï¼Œé€‰æ‹©ç½‘å…³ç±»å‹ï¼ˆClash æˆ– Surgeï¼‰
2. ç‚¹å‡»ã€ŒæŸ¥çœ‹å®‰è£…è„šæœ¬ã€ï¼Œå¤åˆ¶ä¸€é”®å®‰è£…å‘½ä»¤ï¼Œåœ¨ç›®æ ‡ä¸»æœºä¸Šæ‰§è¡Œï¼š

```bash
# Clash / Mihomo ç½‘å…³ç¤ºä¾‹
curl -fsSL https://raw.githubusercontent.com/foru17/neko-master/main/apps/agent/install.sh \
  | env NEKO_SERVER='http://your-panel:3000' \
        NEKO_BACKEND_ID='1' \
        NEKO_BACKEND_TOKEN='ag_xxx' \
        NEKO_GATEWAY_TYPE='clash' \
        NEKO_GATEWAY_URL='http://127.0.0.1:9090' \
        sh

# Surge ç½‘å…³ç¤ºä¾‹
curl -fsSL https://raw.githubusercontent.com/foru17/neko-master/main/apps/agent/install.sh \
  | env NEKO_SERVER='http://your-panel:3000' \
        NEKO_BACKEND_ID='2' \
        NEKO_BACKEND_TOKEN='ag_yyy' \
        NEKO_GATEWAY_TYPE='surge' \
        NEKO_GATEWAY_URL='http://127.0.0.1:9091' \
        sh
```

å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ `nekoagent` ç®¡ç†å®ä¾‹ï¼š

```bash
nekoagent list               # åˆ—å‡ºæ‰€æœ‰å®ä¾‹
nekoagent status <instance>  # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
nekoagent logs <instance>    # å®æ—¶æ—¥å¿—
nekoagent restart <instance> # é‡å¯
nekoagent upgrade            # å…¨å±€å‡çº§ï¼ˆCLI + äºŒè¿›åˆ¶ï¼‰
```

> è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å·²æœ‰å®‰è£…ï¼Œè‹¥å·²å­˜åœ¨åˆ™åªæ·»åŠ æ–°å®ä¾‹è€Œä¸é‡æ–°ä¸‹è½½äºŒè¿›åˆ¶ã€‚
> åŒä¸€ä¸»æœºå¯åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹ï¼ˆä¸åŒ `NEKO_INSTANCE_NAME`ï¼‰ï¼Œå¯¹åº”ä¸åŒç½‘å…³ã€‚

### Agent æ–‡æ¡£

- [æ€»è§ˆ](./docs/agent/overview.md)ï¼šæ¶æ„è¯´æ˜ã€ç›´è¿ vs Agent å¯¹æ¯”ã€å®‰å…¨æ¨¡å‹
- [å¿«é€Ÿå¼€å§‹](./docs/agent/quick-start.md)ï¼šä» UI åˆ°è¿è¡Œçš„å®Œæ•´æ­¥éª¤
- [å®‰è£…æŒ‡å—](./docs/agent/install.md)ï¼šå®‰è£…æ–¹å¼ã€systemd / launchd / OpenWrt å¼€æœºè‡ªå¯
- [å‚æ•°é…ç½®](./docs/agent/config.md)ï¼šå®Œæ•´å‚æ•°åˆ—è¡¨ä¸ç¤ºä¾‹
- [å‘å¸ƒæµç¨‹](./docs/agent/release.md)ï¼šç‰ˆæœ¬å‘½åä¸å…¼å®¹æ€§ç­–ç•¥
- [å¸¸è§é—®é¢˜](./docs/agent/troubleshooting.md)ï¼šå¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ³•

## ğŸ“– é¦–æ¬¡ä½¿ç”¨

![é¦–æ¬¡ä½¿ç”¨](./assets/neko-master-setup.png)

### æ¥å…¥ Clash / Mihomo

1. æ‰“å¼€ <http://localhost:3000>
2. é¦–æ¬¡è®¿é—®ä¼šå¼¹å‡º**ç½‘å…³é…ç½®**å¯¹è¯æ¡†
3. å¡«å†™ç½‘ç»œç½‘å…³ï¼ˆå¦‚ OpenClashï¼‰è¿æ¥ä¿¡æ¯ï¼š
   - **åç§°**: è‡ªå®šä¹‰åç§°ï¼ˆå¦‚ "Home Gateway"ï¼‰
   - **ç±»å‹**: é€‰æ‹© `Clash / Mihomo`
   - **åœ°å€**: ç½‘å…³åç«¯åœ°å€ï¼ˆå¦‚ `192.168.101.1`ï¼‰
   - **ç«¯å£**: ç½‘å…³åç«¯ç«¯å£ï¼ˆå¦‚ `9090`ï¼‰
   - **Token**: å¦‚æœé…ç½®äº† Secret åˆ™å¡«å†™ï¼Œå¦åˆ™ç•™ç©º
4. ç‚¹å‡»ã€Œæ·»åŠ åç«¯ã€ä¿å­˜é…ç½®
5. ç³»ç»Ÿå°†è‡ªåŠ¨å¼€å§‹é‡‡é›†å¹¶åˆ†ææµé‡æ•°æ®

> ğŸ’¡ **è·å–ç½‘å…³åœ°å€**: è¿›å…¥ç½‘å…³æ§åˆ¶é¢æ¿ï¼ˆå¦‚ OpenClashï¼‰ â†’ æ‰“å¼€ã€Œå¤–éƒ¨æ§åˆ¶ã€â†’ å¤åˆ¶ API åœ°å€

### æ¥å…¥ Surge

![Surge HTTP API é…ç½®](./assets/neko-master-surge.png)

Neko Master æ”¯æŒæ¥å…¥ Surge ç½‘å…³ï¼Œå®ç°å®Œæ•´çš„è§„åˆ™é“¾å¯è§†åŒ–å’Œæµé‡åˆ†æã€‚

#### 1. å¼€å¯ Surge HTTP API

åœ¨ Surge é…ç½®ä¸­å¯ç”¨ HTTP è¿œç¨‹ APIï¼š

```ini
[General]
http-api = 127.0.0.1:9091
http-api-tls = false
http-api-web-dashboard = true
```

æˆ–è€…é€šè¿‡ Surge çš„å›¾å½¢ç•Œé¢é…ç½®ï¼š
- **HTTP è¿œç¨‹ API**: `è®¾ç½®` â†’ `å¸¸è§„` â†’ `HTTP è¿œç¨‹ API`
- **ç«¯å£**: é»˜è®¤ `9091`
- **è®¤è¯**: å»ºè®®è®¾ç½®å¯†ç å¢å¼ºå®‰å…¨æ€§

#### 2. åœ¨ Neko Master ä¸­æ·»åŠ  Surge åç«¯

1. æ‰“å¼€ Neko Master è®¾ç½®å¯¹è¯æ¡†
2. ç‚¹å‡»ã€Œæ·»åŠ åç«¯ã€
3. å¡«å†™è¿æ¥ä¿¡æ¯ï¼š
   - **åç§°**: è‡ªå®šä¹‰åç§°ï¼ˆå¦‚ "Surge Home"ï¼‰
   - **ç±»å‹**: é€‰æ‹© `Surge`
   - **åœ°å€**: Surge è¿è¡Œçš„ IP åœ°å€ï¼ˆå¦‚ `192.168.1.1` æˆ– `127.0.0.1`ï¼‰
   - **ç«¯å£**: HTTP API ç«¯å£ï¼ˆé»˜è®¤ `9091`ï¼‰
   - **Token**: HTTP API å¯†ç ï¼ˆå¦‚æœè®¾ç½®äº†çš„è¯ï¼‰
4. ç‚¹å‡»ã€Œæµ‹è¯•è¿æ¥ã€ç¡®è®¤é…ç½®æ­£ç¡®
5. ä¿å­˜é…ç½®

> ğŸ’¡ **æ³¨æ„**: Surge ä½¿ç”¨ HTTP è½®è¯¢æ–¹å¼è·å–æ•°æ®ï¼ˆç›¸æ¯” Clash çš„ WebSocket å®æ—¶æµï¼‰ï¼Œæ•°æ®åˆ·æ–°å»¶è¿Ÿçº¦ 2 ç§’ã€‚

## ğŸ”§ ç«¯å£å†²çªè§£å†³

å¦‚æœçœ‹åˆ°é”™è¯¯æç¤ºç«¯å£å·²è¢«å ç”¨ï¼Œæœ‰ä»¥ä¸‹å‡ ç§è§£å†³æ–¹æ¡ˆï¼š

### æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ .env æ–‡ä»¶

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆä¸ `docker-compose.yml` åŒç›®å½•ï¼‰ï¼š

```env
WEB_EXTERNAL_PORT=8080    # ä¿®æ”¹ Web UI ç«¯å£
API_EXTERNAL_PORT=8081    # ä¿®æ”¹ API ç«¯å£
WS_EXTERNAL_PORT=8082     # ä¿®æ”¹ WebSocket å¤–éƒ¨ç«¯å£ï¼ˆä»…ç›´è¿æ—¶éœ€è¦ï¼‰
COOKIE_SECRET=your-long-random-secret   # å¼ºçƒˆå»ºè®®å›ºå®š
```

ç„¶åé‡å¯ï¼š

```bash
docker compose down
docker compose up -d
```

ç°åœ¨è®¿é—® <http://localhost:8080>

### æ–¹æ¡ˆ 2ï¼šç›´æ¥ä¿®æ”¹ docker-compose.yml

```yaml
ports:
  - "8080:3000" # å¤–éƒ¨ 8080 â†’ å†…éƒ¨ 3000
  - "8082:3002" # å¤–éƒ¨ 8082 â†’ å†…éƒ¨ 3002ï¼ˆç»™åä»£/Tunnel è½¬å‘ WSï¼‰
```

> è¯´æ˜ï¼šå¦‚æœä½ ä¸èµ°åä»£ã€ç›´æ¥è®©æµè§ˆå™¨è¿ `ws://host:ç«¯å£`ï¼Œä¸”å¤–éƒ¨ WS ç«¯å£ä¸æ˜¯ `3002`ï¼Œè¯·åŒæ—¶è®¾ç½® `WS_EXTERNAL_PORT=<å¤–éƒ¨ç«¯å£>`ã€‚

### æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ä¸€é”®è„šæœ¬

```bash
curl -fsSL https://raw.githubusercontent.com/foru17/neko-master/main/setup.sh | bash
```

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶æä¾›å¯ç”¨çš„ç«¯å£ã€‚

## ğŸ³ Docker é…ç½®

### ç«¯å£è¯´æ˜

| ç«¯å£ |   ç”¨é€”    | å¤–éƒ¨å¿…éœ€ | è¯´æ˜                                             |
| :--: | :-------: | :------: | :----------------------------------------------- |
| 3000 | Web ç•Œé¢  |    âœ…    | å‰ç«¯è®¿é—®å…¥å£                                     |
| 3001 | API æ¥å£  |   å¯é€‰   | å‰ç«¯é»˜è®¤åŒåŸŸ `/api`ï¼Œä¸€èˆ¬æ— éœ€å…¬ç½‘æš´éœ²ï¼ˆä»“åº“é»˜è®¤ Compose ä¼šæ˜ å°„ï¼‰ |
| 3002 | WebSocket |   å¯é€‰   | å®æ—¶æ¨é€ç«¯å£ï¼Œå»ºè®®ä»…ç»™åä»£å±‚è½¬å‘ï¼Œä¸ç›´æ¥å…¬ç½‘æš´éœ²ï¼ˆä»“åº“é»˜è®¤ Compose ä¼šæ˜ å°„ï¼‰ |

### ç¯å¢ƒå˜é‡è¯´æ˜ï¼ˆéƒ¨ç½²ï¼‰

| å˜é‡å | é»˜è®¤å€¼ | ä½œç”¨ | ä½•æ—¶è®¾ç½® |
| :-- | :-- | :-- | :-- |
| `WEB_PORT` | `3000` | Web æœåŠ¡ç›‘å¬ç«¯å£ï¼ˆå®¹å™¨å†…ï¼‰ | ä¸€èˆ¬ä¸æ”¹ |
| `API_PORT` | `3001` | API æœåŠ¡ç›‘å¬ç«¯å£ï¼ˆå®¹å™¨å†…ï¼‰ | ä¸€èˆ¬ä¸æ”¹ |
| `COLLECTOR_WS_PORT` | `3002` | WS æœåŠ¡ç›‘å¬ç«¯å£ï¼ˆå®¹å™¨å†…ï¼‰ | ä¸€èˆ¬ä¸æ”¹ |
| `DB_PATH` | `/app/data/stats.db` | SQLite æ–‡ä»¶è·¯å¾„ | è‡ªå®šä¹‰æ•°æ®ç›®å½•æ—¶ |
| `WEB_EXTERNAL_PORT` | `3000` | `docker-compose.yml` çš„ Web å¤–éƒ¨ç«¯å£æ˜ å°„ | å¤–éƒ¨ Web ç«¯å£å˜æ›´æ—¶ |
| `API_EXTERNAL_PORT` | `3001` | `docker-compose.yml` çš„ API å¤–éƒ¨ç«¯å£æ˜ å°„ | éœ€è¦å¤–éƒ¨ç›´è¿ API æ—¶ |
| `WS_EXTERNAL_PORT` | `3002` | `docker-compose.yml` çš„ WS å¤–éƒ¨ç«¯å£æ˜ å°„ï¼›åŒæ—¶ç”¨äºå‰ç«¯ç›´è¿ WS ç«¯å£æ¨æ–­ | éåä»£ç›´è¿ WS ä¸”å¤–éƒ¨ç«¯å£å˜åŒ–æ—¶ |
| `NEXT_PUBLIC_API_URL` | ç©º | è¦†ç›–å‰ç«¯ API åŸºåœ°å€ï¼ˆå¦‚ `https://api.example.com`ï¼‰ | API ä¸èµ°åŒåŸŸ `/api` æ—¶ |
| `NEXT_PUBLIC_WS_URL` | ç©º | è¦†ç›–å‰ç«¯ WS åœ°å€ï¼ˆæ”¯æŒç»å¯¹ URL æˆ– `/custom_ws`ï¼‰ | WS è·¯å¾„/åŸŸåè‡ªå®šä¹‰æ—¶ |
| `NEXT_PUBLIC_WS_PORT` | `3002` | WS ç›´è¿ç«¯å£å…œåº•å€¼ï¼ˆæ„å»ºæ—¶æ³¨å…¥ï¼‰ | éåä»£ç›´è¿ WS ä¸”éœ€æ˜¾å¼æŒ‡å®šç«¯å£æ—¶ |
| `API_URL` | `http://localhost:3001` | Next.js `/api` rewrite ç›®æ ‡ï¼ˆä¸»è¦ç”¨äºæºç /è‡ªæ„å»ºï¼‰ | ä½ ä¿®æ”¹äº† API å®é™…ç›‘å¬åœ°å€æ—¶ |
| `COOKIE_SECRET` | è‡ªåŠ¨ç”Ÿæˆ | Cookie ç­¾åå¯†é’¥ï¼›æœªå›ºå®šæ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆï¼ˆæ•°æ®ç›®å½•ä¸æŒä¹…åŒ–æ—¶é‡å¯åä¼šè¯ä¼šå¤±æ•ˆï¼‰ | ç”Ÿäº§ç¯å¢ƒå¼ºçƒˆå»ºè®®å›ºå®šé…ç½® |
| `GEOIP_LOOKUP_PROVIDER` | `online` | IP åœ°ç†æŸ¥è¯¢æ¥æºï¼ˆ`online`/`local`ï¼‰ | éœ€è¦é»˜è®¤èµ°æœ¬åœ° MMDB æŸ¥è¯¢æ—¶ |
| `GEOIP_ONLINE_API_URL` | `https://api.ipinfo.es/ipinfo` | åœ¨çº¿ IP æŸ¥è¯¢æ¥å£åœ°å€ï¼ˆéœ€å…¼å®¹ `ipinfo.my` çš„å“åº”ç»“æ„ï¼‰ | ä»…åœ¨ä½ éƒ¨ç½²äº†å…¼å®¹æ¥å£æ—¶è®¾ç½® |
| `FORCE_ACCESS_CONTROL_OFF` | `false` | å¼ºåˆ¶å…³é—­è®¿é—®æ§åˆ¶ï¼ˆç´§æ€¥æ¢å¤ï¼‰ | ä»…å¿˜è®°å¯†ç ä¸´æ—¶ä½¿ç”¨ |
| `SHOWCASE_SITE_MODE` | `false` | æ¼”ç¤ºåªè¯»æ¨¡å¼ï¼ˆç¦ç”¨æ•æ„Ÿå†™æ“ä½œï¼‰ | ä»…å…¬å¼€æ¼”ç¤ºç«™ç‚¹ |

### é«˜çº§è°ƒä¼˜å˜é‡ï¼ˆå¯é€‰ï¼‰

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
| :-- | :-- | :-- |
| `FLUSH_INTERVAL_MS` | `30000` | é‡‡é›†ç¼“å†²åŒºè½åº“é—´éš” |
| `FLUSH_MAX_BUFFER_SIZE` | `5000` | é‡‡é›†ç¼“å†²åŒºæœ€å¤§æ¡ç›®ï¼Œè¾¾åˆ°å³æå‰è½åº“ |
| `REALTIME_MAX_MINUTES` | `180` | å®æ—¶å†…å­˜çª—å£å¤§å°ï¼ˆåˆ†é’Ÿï¼‰ |
| `REALTIME_RANGE_END_TOLERANCE_MS` | `120000` | æŸ¥è¯¢ç»“æŸæ—¶é—´å®¹å·®ï¼Œç¼“è§£è¾¹ç•ŒæŠ–åŠ¨ |
| `SURGE_POLICY_SYNC_INTERVAL_MS` | `600000` | Surge ç­–ç•¥åŒæ­¥å‘¨æœŸ |
| `DB_RANGE_QUERY_CACHE_TTL_MS` | `8000` | èŒƒå›´æŸ¥è¯¢ç¼“å­˜ TTL |
| `DB_HISTORICAL_QUERY_CACHE_TTL_MS` | `300000` | å†å²æŸ¥è¯¢ç¼“å­˜ TTL |
| `DB_RANGE_QUERY_CACHE_MAX_ENTRIES` | `1024` | èŒƒå›´æŸ¥è¯¢ç¼“å­˜æœ€å¤§æ¡ç›® |
| `DB_RANGE_QUERY_CACHE_DISABLED` | ç©º | è®¾ä¸º `1` å¯å…³é—­èŒƒå›´æŸ¥è¯¢ç¼“å­˜ |
| `DEBUG_SURGE` | `false` | Surge é‡‡é›†è°ƒè¯•æ—¥å¿—å¼€å…³ï¼ˆ`true` å¼€å¯ï¼‰ |

### API / WS åœ°å€è§£æä¼˜å…ˆçº§

1. API å®¢æˆ·ç«¯åŸºå€ï¼š`runtime-config.API_URL` â†’ `NEXT_PUBLIC_API_URL` â†’ é»˜è®¤åŒåŸŸ `/api`
2. `/api` çš„æœåŠ¡ç«¯è½¬å‘ç›®æ ‡ï¼š`API_URL`ï¼ˆé»˜è®¤ `http://localhost:3001`ï¼Œåœ¨ Next.js rewrite ä¸­ç”Ÿæ•ˆï¼‰
3. WS URLï¼š`runtime-config.WS_URL` â†’ `NEXT_PUBLIC_WS_URL` â†’ è‡ªåŠ¨å€™é€‰ï¼ˆç”Ÿäº§ä¼˜å…ˆ `/_cm_ws`ï¼Œå¤±è´¥å†å°è¯•ç›´è¿ç«¯å£ï¼‰
4. WS ç«¯å£ï¼š`runtime-config.WS_PORT`ï¼ˆæ¥è‡ª `WS_EXTERNAL_PORT`ï¼‰â†’ `NEXT_PUBLIC_WS_PORT` â†’ `3002`
5. é»˜è®¤éƒ¨ç½²ä¸‹æ— éœ€æ‰‹åŠ¨é…ç½® `NEXT_PUBLIC_WS_URL`ï¼›ä»…å½“ä½ è‡ªå®šä¹‰ WS è·¯å¾„/åŸŸåæ—¶å†è®¾ç½®

### çº¿ä¸Šç¯å¢ƒå»ºè®®ï¼ˆå¼ºçƒˆï¼‰

```env
NODE_ENV=production
DB_PATH=/app/data/stats.db
COOKIE_SECRET=<è‡³å°‘32å­—èŠ‚éšæœºå­—ç¬¦ä¸²>
# å¯é€‰ï¼šé»˜è®¤åˆ‡æ¢åˆ°æœ¬åœ° MMDB æŸ¥è¯¢
# GEOIP_LOOKUP_PROVIDER=local
# ä»…ç´§æ€¥æ¢å¤æ—¶ä¸´æ—¶å¼€å¯ï¼Œå¹³æ—¶ä¸è¦ä¿ç•™ true
# FORCE_ACCESS_CONTROL_OFF=false
```

å¯ä½¿ç”¨ `openssl rand -hex 32` ç”Ÿæˆ `COOKIE_SECRET`ã€‚

è¡¥å……å»ºè®®ï¼š

1. æŒ‚è½½æŒä¹…åŒ–ç›®å½•ï¼ˆå¦‚ `./data:/app/data`ï¼‰ï¼Œé¿å…æ•°æ®åº“ä¸è‡ªåŠ¨ç”Ÿæˆå¯†é’¥ä¸¢å¤±ã€‚
2. å¦‚æœå¤–éƒ¨ç›´è¿ WS ä¸”ç«¯å£é `3002`ï¼ŒåŠ¡å¿…åŒæ­¥è®¾ç½® `WS_EXTERNAL_PORT`ã€‚
3. è‹¥æºç éƒ¨ç½²ä¿®æ”¹äº† API ç«¯å£æˆ–åœ°å€ï¼Œè®°å¾—åŒæ­¥è®¾ç½® `API_URL`ã€‚
4. å¦‚éœ€æœ¬åœ° MMDB æŸ¥è¯¢ï¼šæŒ‚è½½ `./geoip:/app/data/geoip:ro`ï¼Œå¹¶åœ¨é¢æ¿ã€Œè®¾ç½® -> åå¥½è®¾ç½® -> IP æŸ¥è¯¢æ¥æºã€åˆ‡æ¢ä¸ºæœ¬åœ°ã€‚
5. MMDB æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ï¼Œé¡¹ç›®é•œåƒä¸å†…ç½®æ•°æ®åº“ã€‚è¯·è‡ªè¡Œä¸‹è½½å¹¶æ”¾å…¥ `./geoip`ï¼Œæ–‡ä»¶åå›ºå®šä¸ºï¼š
   `GeoLite2-City.mmdb`ã€`GeoLite2-ASN.mmdb`ï¼ˆå¿…éœ€ï¼‰ï¼Œ`GeoLite2-Country.mmdb`ï¼ˆå¯é€‰ï¼‰ã€‚
   æ¨èæ¥æºï¼š<https://github.com/P3TERX/GeoLite.mmdb>ã€‚

> è¿›é˜¶è¯´æ˜ï¼šAgent æ¨¡å¼çš„å®‰è£…ã€å‚æ•°ã€å‘å¸ƒä¸å…¼å®¹ç­–ç•¥å·²è¿ç§»åˆ° `docs/agent/*`ï¼Œè¯·ä»¥æ–‡æ¡£ä¸ºå‡†ã€‚

## ğŸ—„ï¸ ClickHouseï¼ˆå¯é€‰ï¼‰

SQLite æ˜¯ Neko Master çš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œå¯¹å¤§å¤šæ•°ç”¨æˆ·å·²å®Œå…¨å¤Ÿç”¨ã€‚  
å¦‚æœä½ æœ‰ä»¥ä¸‹éœ€æ±‚ï¼Œå¯ä»¥é¢å¤–å¯ç”¨ ClickHouseï¼š

- æ•°æ®é‡å¾ˆå¤§ï¼ˆåŸŸå / IP æ¡ç›®æ•°åä¸‡ä»¥ä¸Šï¼‰
- éœ€è¦å¿«é€Ÿçš„é•¿æ—¶é—´èŒƒå›´ï¼ˆâ‰¥ 7 å¤©ï¼‰èšåˆæŸ¥è¯¢
- å¸Œæœ›å°†å†å²ç»Ÿè®¡æ•°æ®ä¸é…ç½®æ•°æ®åˆ†å±‚å­˜å‚¨

> ClickHouse å®Œå…¨å¯é€‰ã€‚SQLite ä½œä¸ºé…ç½®å’Œå…ƒæ•°æ®å­˜å‚¨ï¼Œæ— è®ºæ˜¯å¦å¯ç”¨ ClickHouse éƒ½ä¸ä¼šè¢«ç§»é™¤ã€‚

### æ¶æ„è¯´æ˜

å¯ç”¨ ClickHouse åï¼Œç³»ç»Ÿè¿›å…¥**åŒå†™æ¨¡å¼**ï¼š

```
BatchBuffer.flush()
    â”‚
    â”œâ”€â”€â†’ SQLiteï¼ˆé…ç½® / å…ƒæ•°æ®ï¼Œå§‹ç»ˆå†™å…¥ï¼‰
    â””â”€â”€â†’ ClickHouseï¼ˆç»Ÿè®¡æµé‡æ•°æ®ï¼ŒåŒå†™ï¼‰
           â””â”€â”€ Buffer è¡¨ â†’ SummingMergeTree å¼‚æ­¥åˆå¹¶
```

è¯»å–æ¥æºç”± `STATS_QUERY_SOURCE` æ§åˆ¶ï¼Œé»˜è®¤ä»ä¸º `sqlite`ã€‚

### å¯ç”¨ ClickHouseï¼ˆDockerï¼‰

#### æ­¥éª¤ä¸€ï¼šå¯åŠ¨ ClickHouse å®¹å™¨

ä»“åº“å†…ç½®çš„ `docker-compose.yml` å·²åŒ…å« ClickHouse æœåŠ¡ï¼Œé€šè¿‡ `profiles: [clickhouse]` éš”ç¦»ï¼Œé»˜è®¤ä¸å¯åŠ¨ã€‚
ç›´æ¥åœ¨ä»“åº“æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
docker compose --profile clickhouse up -d
```

> ClickHouse æ•°æ®æŒä¹…åŒ–åˆ° `./data/clickhouse`ï¼Œä¸ä¸»åº”ç”¨æ•°æ®åˆ†ç›®å½•å­˜å‚¨ã€‚

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯**è‡ªå®šä¹‰ `docker-compose.yml`**ï¼ˆå¦‚ä¸Šæ–¹åœºæ™¯ A/Bï¼‰ï¼Œéœ€æ‰‹åŠ¨æ·»åŠ  ClickHouse æœåŠ¡å—ï¼š

```yaml
services:
  neko-master:
    # ... ä½ çš„ç°æœ‰é…ç½® ...
    environment:
      # åœ¨ç°æœ‰ environment ä¸­è¿½åŠ ï¼š
      - CH_ENABLED=${CH_ENABLED:-0}
      - CH_HOST=${CH_HOST:-clickhouse}
      - CH_PORT=${CH_PORT:-8123}
      - CH_DATABASE=${CH_DATABASE:-neko_master}
      - CH_USER=${CH_USER:-neko}
      - CH_PASSWORD=${CH_PASSWORD:-neko_master}
      - CH_WRITE_ENABLED=${CH_WRITE_ENABLED:-0}
      - STATS_QUERY_SOURCE=${STATS_QUERY_SOURCE:-sqlite}
    networks:
      - neko-master-network

  clickhouse:
    image: clickhouse/clickhouse-server:24.8
    container_name: neko-master-clickhouse
    restart: unless-stopped
    profiles: ["clickhouse"]
    ports:
      - "${CH_EXTERNAL_HTTP_PORT:-8123}:8123"
      - "${CH_EXTERNAL_NATIVE_PORT:-9000}:9000"
    volumes:
      - ./data/clickhouse:/var/lib/clickhouse
    environment:
      - CLICKHOUSE_DB=${CH_DATABASE:-neko_master}
      - CLICKHOUSE_USER=${CH_USER:-neko}
      - CLICKHOUSE_PASSWORD=${CH_PASSWORD:-neko_master}
      - CLICKHOUSE_DEFAULT_ACCESS_MANAGEMENT=1
    networks:
      - neko-master-network
    healthcheck:
      test: ["CMD-SHELL", "wget -q --spider http://127.0.0.1:8123/ping || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  neko-master-network:
    driver: bridge
```

#### æ­¥éª¤äºŒï¼šé…ç½®ç¯å¢ƒå˜é‡

åœ¨ `.env` ä¸­æ·»åŠ ï¼ˆä¸ `docker-compose.yml` åŒç›®å½•ï¼‰ï¼š

```env
# å¼€å¯ ClickHouse è¿æ¥
CH_ENABLED=1

# å¼€å¯åŒå†™
CH_WRITE_ENABLED=1

# è¯»å–æ¥æºï¼šsqliteï¼ˆé»˜è®¤ï¼‰/ autoï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼‰/ clickhouseï¼ˆå¼ºåˆ¶ï¼‰
STATS_QUERY_SOURCE=auto

# ClickHouse è¿æ¥ä¿¡æ¯ï¼ˆä½¿ç”¨ docker-compose.yml é»˜è®¤å€¼æ—¶ï¼Œä»¥ä¸‹æ— éœ€ä¿®æ”¹ï¼‰
CH_HOST=clickhouse
CH_PORT=8123
CH_DATABASE=neko_master
CH_USER=neko
CH_PASSWORD=neko_master
```

é‡å¯ï¼š

```bash
docker compose --profile clickhouse up -d
```

### ClickHouse ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
| :-- | :-- | :-- |
| `CH_ENABLED` | `0` | æ˜¯å¦å¯ç”¨ ClickHouse è¿æ¥ï¼ˆ`1` å¼€å¯ï¼‰ |
| `CH_WRITE_ENABLED` | `0` | æ˜¯å¦å¼€å¯åŒå†™ï¼ˆé¡»å…ˆå¼€ `CH_ENABLED`ï¼‰ |
| `CH_ONLY_MODE` | `0` | CH å¥åº·æ—¶è·³è¿‡ SQLite ç»Ÿè®¡å†™å…¥ï¼ˆçº¯ CH æ¨¡å¼ï¼‰ |
| `CH_HOST` | `clickhouse` | ClickHouse ä¸»æœºåœ°å€ |
| `CH_PORT` | `8123` | ClickHouse HTTP ç«¯å£ |
| `CH_DATABASE` | `neko_master` | æ•°æ®åº“åç§° |
| `CH_USER` | `neko` | ç”¨æˆ·å |
| `CH_PASSWORD` | `neko_master` | å¯†ç  |
| `CH_SECURE` | `0` | æ˜¯å¦ä½¿ç”¨ HTTPS è¿æ¥ |
| `CH_REQUIRED` | `0` | CH ä¸å¯ç”¨æ—¶æ‹’ç»å¯åŠ¨ï¼ˆ`1` å¼€å¯ï¼‰ |
| `CH_AUTO_CREATE_TABLES` | `1` | é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨å»ºè¡¨ |
| `CH_WRITE_MAX_PENDING_BATCHES` | `200` | æœ€å¤§å†™å…¥ç§¯å‹æ‰¹æ¬¡æ•° |
| `CH_UNHEALTHY_THRESHOLD` | `5` | è¿ç»­å¤±è´¥æ¬¡æ•°è¶…è¿‡æ­¤å€¼åæ ‡è®°ä¸ºä¸å¥åº·ï¼Œè‡ªåŠ¨å›é€€ SQLite |
| `STATS_QUERY_SOURCE` | `sqlite` | è¯»å–æ¥æºï¼š`sqlite` / `auto` / `clickhouse` |
| `CH_COMPARE_ENABLED` | `0` | å¼€å¯ SQLite â†” ClickHouse æ•°æ®å¯¹è´¦ |
| `CH_EXTERNAL_HTTP_PORT` | `8123` | ClickHouse HTTP å¤–éƒ¨ç«¯å£ï¼ˆCompose æ˜ å°„ï¼‰ |
| `CH_EXTERNAL_NATIVE_PORT` | `9000` | ClickHouse Native å¤–éƒ¨ç«¯å£ï¼ˆCompose æ˜ å°„ï¼‰ |

> **å¥åº·å›é€€æœºåˆ¶**ï¼šClickHouse è¿ç»­å†™å…¥å¤±è´¥è¶…è¿‡ `CH_UNHEALTHY_THRESHOLD` æ¬¡åï¼Œç³»ç»Ÿè‡ªåŠ¨æ ‡è®°ä¸ºä¸å¥åº·ï¼ŒSQLite å†™å…¥æ¢å¤ï¼ˆå³ä½¿å¼€å¯äº† `CH_ONLY_MODE`ï¼‰ã€‚ClickHouse æ¢å¤æ­£å¸¸åè‡ªåŠ¨é‡æ–°æ ‡è®°ä¸ºå¥åº·ã€‚

### è€ç”¨æˆ·è¿ç§»æŒ‡å¼•

> ä»çº¯ SQLite ç‰ˆæœ¬å‡çº§æ—¶ï¼Œ**ä½ çš„æ•°æ®ä¸ä¼šä¸¢å¤±**ã€‚  
> SQLite æ–‡ä»¶ï¼ˆ`./data/stats.db`ï¼‰å®Œæ•´ä¿ç•™ï¼Œä»¥ä¸‹æ˜¯æ¨èçš„æ¸è¿›è¿ç§»è·¯å¾„ï¼š

#### ç¬¬ä¸€é˜¶æ®µï¼šåŒå†™ï¼ˆè§‚å¯ŸæœŸï¼Œæ¨èèµ·ç‚¹ï¼‰

```env
CH_ENABLED=1
CH_WRITE_ENABLED=1
STATS_QUERY_SOURCE=sqlite   # ç»§ç»­è¯» SQLiteï¼ŒCH åœ¨åå°ç§¯ç´¯æ•°æ®
```

å¯åŠ¨å¹¶è§‚å¯Ÿ `[ClickHouse Writer]` æ—¥å¿—ç¡®è®¤å†™å…¥æ­£å¸¸ã€‚

#### ç¬¬äºŒé˜¶æ®µï¼šåˆ‡æ¢è¯»å–æ¥æº

```env
STATS_QUERY_SOURCE=auto     # è‡ªåŠ¨é€‰æ‹©ï¼šæœ€è¿‘æ•°æ®èµ° CHï¼Œå†å²èµ° SQLite
# æˆ–
STATS_QUERY_SOURCE=clickhouse  # å¼ºåˆ¶è¯» CH
```

#### ç¬¬ä¸‰é˜¶æ®µï¼ˆå¯é€‰ï¼‰ï¼šè¿ç§»å†å²æ•°æ®

å¦‚éœ€å°† SQLite å†å²ç»Ÿè®¡æ•°æ®æ¬å…¥ ClickHouseï¼š

```bash
# æ ‡å‡†è¿ç§»ï¼ˆæ¸…ç©º CH åé‡æ–°å¯¼å…¥ï¼Œé™„å¸¦å¯¹è´¦éªŒè¯ï¼‰
./scripts/ch-migrate-docker.sh

# è¿½åŠ æ¨¡å¼ï¼ˆä¿ç•™ CH ç°æœ‰æ•°æ®ï¼Œå¢é‡å¯¼å…¥ï¼‰
./scripts/ch-migrate-docker.sh --append

# æŒ‡å®šæ—¶é—´çª—å£
./scripts/ch-migrate-docker.sh --from 2026-02-01T00:00:00Z --to 2026-02-20T00:00:00Z
```

#### ç¬¬å››é˜¶æ®µï¼ˆå¯é€‰ï¼‰ï¼šçº¯ ClickHouse æ¨¡å¼

å½“ ClickHouse ç¨³å®šè¿è¡Œåï¼Œå¯åœæ­¢ SQLite ç»Ÿè®¡å†™å…¥ï¼š

```env
CH_ONLY_MODE=1
```

> å³ä½¿åœ¨ `CH_ONLY_MODE=1` ä¸‹ï¼Œè‹¥ ClickHouse ä¸å¥åº·ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ° SQLite å†™å…¥ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚

### å›é€€åˆ°çº¯ SQLite

éšæ—¶å¯ä»¥å®Œå…¨å›é€€ï¼š

```env
CH_ENABLED=0
CH_WRITE_ENABLED=0
CH_ONLY_MODE=0
STATS_QUERY_SOURCE=sqlite
```

é‡å¯åæ¢å¤çº¯ SQLite æ¨¡å¼ï¼Œå†å²æ•°æ®å®Œæ•´ä¿ç•™ã€‚

---

## ğŸŒ åå‘ä»£ç†ä¸ Tunnel

æ¨èå°† Web é¡µé¢ä¸ WS éƒ½æ”¾åœ¨åŒä¸€ä¸ªåŸŸåä¸‹ï¼Œé€šè¿‡ä¸åŒè·¯å¾„è½¬å‘ï¼š`/` â†’ `3000`ï¼Œ`/_cm_ws` â†’ `3002`ã€‚

### Nginx æ ‡å‡†ç¤ºä¾‹ï¼ˆæ¨èï¼‰

```nginx
server {
  listen 443 ssl http2;
  server_name neko.example.com;

  location / {
    proxy_pass http://<neko-master-host>:3000;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
  }

  location ^~ /_cm_ws {
    proxy_pass http://<neko-master-host>:3002;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_read_timeout 86400;
    proxy_send_timeout 86400;
    proxy_buffering off;
  }
}
```

é…å¥— Docker ç¯å¢ƒå˜é‡ï¼š

```env
# é»˜è®¤æ— éœ€é…ç½®ï¼ˆå·²é»˜è®¤ /_cm_wsï¼‰
# å¦‚éœ€è‡ªå®šä¹‰å¯è®¾ç½®ï¼š
# NEXT_PUBLIC_WS_URL=/custom_ws
```

### Cloudflare Tunnel æ ‡å‡†ç¤ºä¾‹

`~/.cloudflared/config.yml`ï¼š

```yaml
tunnel: <your-tunnel-name-or-id>
credentials-file: /path/to/<credentials>.json

ingress:
  - hostname: neko.example.com
    path: /_cm_ws*
    service: http://localhost:3002
  - hostname: neko.example.com
    path: /*
    service: http://localhost:3000
  - service: http_status:404
```

å¯åŠ¨ï¼š

```bash
cloudflared tunnel --config ~/.cloudflared/config.yml run <your-tunnel-name-or-id>
```

å¦‚æœä½¿ç”¨ Zero Trust Dashboard æ‰˜ç®¡è·¯ç”±ï¼ˆtoken æ–¹å¼ï¼‰ï¼Œè¯·åœ¨ Dashboard ä¸­é…ç½®åŒæ ·ä¸¤æ¡è§„åˆ™ï¼Œå¹¶ä¿è¯ `/_cm_ws*` åœ¨ `/*` ä¹‹å‰ã€‚

### å…³é”®æ³¨æ„äº‹é¡¹

1. ä¸è¦æŠŠ WS è·¯å¾„å†™æˆ `ws`ï¼ˆæ— å‰å¯¼ `/`ï¼‰ï¼Œå®¹æ˜“è¯¯åŒ¹é…é™æ€èµ„æºï¼Œå¯¼è‡´ `/_next/static/...` è¿”å› `426 Upgrade Required`
2. WS è·¯ç”±å¿…é¡»é«˜äº catch-all è·¯ç”±ï¼ˆ`/*`ï¼‰
3. é»˜è®¤ä¸éœ€è¦é…ç½® `NEXT_PUBLIC_WS_URL`ï¼›å¦‚ä½ è‡ªå®šä¹‰äº†è¯¥å˜é‡ï¼Œä¿®æ”¹åéœ€é‡å¯å‰ç«¯è¿›ç¨‹/å®¹å™¨
4. å®¹å™¨ä»…æ˜ å°„ `3000` ä¹Ÿèƒ½æ­£å¸¸ç”¨ï¼Œä½†ä¼šè‡ªåŠ¨å›é€€åˆ° HTTP è½®è¯¢ï¼ˆçº¦ 5 ç§’çº§ï¼‰ï¼Œå®æ—¶æ€§å¼±äº WS
5. `beacon.min.js` ç­‰ç¬¬ä¸‰æ–¹è„šæœ¬å¤±è´¥é€šå¸¸ä¸å½±å“ä¸»æ•°æ®é“¾è·¯ï¼ˆAPI/WSï¼‰
6. é»˜è®¤ä¸éœ€è¦å•ç‹¬é…ç½® `/api` åä»£ï¼šå‰ç«¯ä¼šåŒåŸŸè®¿é—® `/api` å¹¶ç”±åº”ç”¨å†…éƒ¨è½¬å‘åˆ° `3001`

> è¯´æ˜ï¼š`/_next/static/... 426 Upgrade Required` åœ¨ **åå‘ä»£ç† / Tunnel é…ç½®é”™è¯¯** æ—¶æ¯”è¾ƒå¸¸è§ï¼›æœ¬åœ°ç›´è¿ï¼ˆä¸ç»åä»£ï¼‰é€šå¸¸ä¸ä¼šé‡åˆ°ã€‚

### å¤šæ¶æ„æ”¯æŒ

Docker é•œåƒåŒæ—¶æ”¯æŒ `linux/amd64` å’Œ `linux/arm64`ã€‚

### æ•°æ®æŒä¹…åŒ–

æ•°æ®é»˜è®¤å­˜å‚¨åœ¨å®¹å™¨å†…çš„ `/app/data` ç›®å½•ï¼Œå»ºè®®æ˜ å°„åˆ°å®¿ä¸»æœºï¼š

```yaml
volumes:
  - ./data:/app/data
```

### æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

```bash
# æ‹‰å–æœ€æ–°é•œåƒå¹¶é‡æ–°å¯åŠ¨
docker compose pull
docker compose up -d
```

## ğŸ” è®¤è¯ä¸å®‰å…¨

Neko Master æ”¯æŒè®¿é—®é‰´æƒåŠŸèƒ½ï¼Œä¿æŠ¤ä½ çš„é¢æ¿æ•°æ®å®‰å…¨ã€‚

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨åŸºçº¿

1. å›ºå®šé…ç½® `COOKIE_SECRET`ï¼ˆå¦åˆ™é‡å¯åä¼šè¯å¯èƒ½å¤±æ•ˆï¼‰ã€‚
2. ä¸è¦é•¿æœŸä¿ç•™ `FORCE_ACCESS_CONTROL_OFF=true`ã€‚
3. `SHOWCASE_SITE_MODE=true` ä»…ç”¨äºæ¼”ç¤ºç«™ç‚¹ï¼ˆä¼šé™åˆ¶å†™æ“ä½œï¼‰ã€‚

ç¤ºä¾‹ï¼š

```env
COOKIE_SECRET=<è‡³å°‘32å­—èŠ‚éšæœºå­—ç¬¦ä¸²>
# FORCE_ACCESS_CONTROL_OFF=false
# SHOWCASE_SITE_MODE=false
```

### å¼€å¯/å…³é—­é‰´æƒ

1. è¿›å…¥é¢æ¿ï¼Œç‚¹å‡»å·¦ä¾§è¾¹æ åº•éƒ¨çš„ã€Œè®¾ç½®ã€ã€‚
2. åˆ‡æ¢åˆ°ã€Œå®‰å…¨ã€æ ‡ç­¾é¡µã€‚
3. åœ¨æ­¤é¡µé¢å¯ä»¥å¼€å¯/å…³é—­è®¿é—®æ§åˆ¶ï¼Œå¹¶è®¾ç½®è®¿é—®ä»¤ç‰Œï¼ˆTokenï¼‰ã€‚

### å¿˜è®°å¯†ç ï¼ˆé‡ç½®è®¿é—®ä»¤ç‰Œï¼‰

å¦‚æœä½ å¿˜è®°äº†è®¿é—®ä»¤ç‰Œï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ `FORCE_ACCESS_CONTROL_OFF` å¼ºåˆ¶è¿›å…¥**ç´§æ€¥è®¿é—®æ¨¡å¼**ã€‚

#### Docker Compose ç”¨æˆ·

1. ä¿®æ”¹ `docker-compose.yml`ï¼Œåœ¨ `environment` ä¸‹æ·»åŠ ï¼š

   ```yaml
   environment:
     - FORCE_ACCESS_CONTROL_OFF=true
   ```

2. é‡å¯å®¹å™¨ï¼š

   ```bash
   docker compose up -d
   ```

3. åˆ·æ–°é¡µé¢ï¼Œä½ å°†çœ‹åˆ°â€œç´§æ€¥è®¿é—®æ¨¡å¼â€è­¦å‘Šã€‚æ­¤æ—¶æ— éœ€æ—§å¯†ç å³å¯åœ¨ã€Œè®¾ç½® -> å®‰å…¨ã€ä¸­é‡ç½®æ–°ä»¤ç‰Œã€‚

4. **é‡è¦**ï¼šé‡ç½®å®Œæˆåï¼ŒåŠ¡å¿…åˆ é™¤è¯¥ç¯å¢ƒå˜é‡å¹¶å†æ¬¡é‡å¯å®¹å™¨ï¼Œä»¥æ¢å¤è®¿é—®æ§åˆ¶ã€‚

#### Docker å‘½ä»¤è¡Œç”¨æˆ·

1. åœæ­¢å¹¶åˆ é™¤æ—§å®¹å™¨ï¼ˆæ•°æ®åœ¨æŒ‚è½½å·ä¸­ï¼Œä¸ä¼šä¸¢å¤±ï¼‰ï¼š

   ```bash
   docker stop neko-master
   docker rm neko-master
   ```

2. æ·»åŠ  `-e FORCE_ACCESS_CONTROL_OFF=true` å‚æ•°é‡æ–°å¯åŠ¨ï¼š

   ```bash
   docker run -d \
     --name neko-master \
     -p 3000:3000 \
     -v $(pwd)/data:/app/data \
     -e FORCE_ACCESS_CONTROL_OFF=true \
     foru17/neko-master:latest
   ```

3. é‡ç½®å¯†ç åï¼Œå†æ¬¡åœæ­¢å®¹å™¨ï¼Œå»é™¤è¯¥å‚æ•°å¹¶é‡å¯ï¼Œæ¢å¤æ­£å¸¸ä¿æŠ¤æ¨¡å¼ã€‚


## â“ å¸¸è§é—®é¢˜

### Q: åªæ˜ å°„ `3000:3000` å¯ä»¥æ­£å¸¸ä½¿ç”¨å—ï¼Ÿ

**A:** å¯ä»¥ã€‚é¡µé¢åŠŸèƒ½ä»å¯ç”¨ï¼Œæœªæ‰“é€š WS æ—¶ä¼šè‡ªåŠ¨å›é€€ä¸º HTTP è½®è¯¢ã€‚  
å¦‚éœ€å®Œæ•´å®æ—¶èƒ½åŠ›ï¼Œè¯·æŒ‰ä¸Šæ–‡é…ç½®åä»£è·¯å¾„ï¼ˆå¦‚ `/_cm_ws`ï¼‰å¹¶è½¬å‘åˆ° `3002`ã€‚

### Q: ç«¯å£å†²çªæˆ–æ”¹ç«¯å£åæ— æ³•è®¿é—®æ€ä¹ˆåŠï¼Ÿ

**A:** å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env`ï¼ˆä¸ `docker-compose.yml` åŒç›®å½•ï¼‰ï¼š

```env
WEB_EXTERNAL_PORT=8080
API_EXTERNAL_PORT=8081
WS_EXTERNAL_PORT=8082
```

ç„¶åé‡å¯å¹¶ç”¨æ–°ç«¯å£è®¿é—®ï¼š

```bash
docker compose down
docker compose up -d
```

### Q: ä¸ºä»€ä¹ˆé‡å¯åç™»å½•çŠ¶æ€ä¼šå¤±æ•ˆï¼Ÿ

**A:** é€šå¸¸æ˜¯ `COOKIE_SECRET` æœªå›ºå®šæˆ–æ•°æ®ç›®å½•æœªæŒä¹…åŒ–å¯¼è‡´ã€‚å»ºè®®ï¼š

1. è®¾ç½®å›ºå®š `COOKIE_SECRET`
2. æŒ‚è½½ `./data:/app/data`

### Q: æœ¬åœ° MMDB æŸ¥è¯¢è¦å‡†å¤‡å“ªäº›æ–‡ä»¶ï¼Ÿ

**A:** å»ºè®®åœ¨é¡¹ç›®ç›®å½•åˆ›å»º `./geoip`ï¼ˆå¯ä¸ `docker-compose.yml` åŒçº§ï¼‰ï¼Œç„¶åæ”¾ç½®ä»¥ä¸‹æ–‡ä»¶ï¼š

1. `GeoLite2-City.mmdb`ï¼ˆå¿…éœ€ï¼‰
2. `GeoLite2-ASN.mmdb`ï¼ˆå¿…éœ€ï¼‰
3. `GeoLite2-Country.mmdb`ï¼ˆå¯é€‰ï¼‰

æ¨èä¸‹è½½æºï¼š<https://github.com/P3TERX/GeoLite.mmdb>ã€‚  
å®¹å™¨å†…å›ºå®šè¯»å–ç›®å½•æ˜¯ `/app/data/geoip`ï¼Œå› æ­¤å»ºè®®ä¿æŒæŒ‚è½½ï¼š
`./geoip:/app/data/geoip:ro`ã€‚åç»­ä½ åªéœ€æ›¿æ¢å®¿ä¸»æœº `./geoip` é‡Œçš„æ–‡ä»¶å³å¯å®Œæˆæ›´æ–°ã€‚

### Q: è¿æ¥ OpenClash / ç½‘å…³å¤±è´¥ï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. OpenClash çš„ã€Œå¤–éƒ¨æ§åˆ¶ã€æ˜¯å¦å·²å¼€å¯
2. OpenClash åœ°å€æ˜¯å¦æ­£ç¡®ï¼ˆæ ¼å¼ï¼š`IP:ç«¯å£`ï¼‰
3. å¦‚æœé…ç½®äº† Secretï¼ŒToken æ˜¯å¦å¡«å†™æ­£ç¡®
4. å®¹å™¨æ˜¯å¦èƒ½è®¿é—®åˆ° OpenClash æ‰€åœ¨ç½‘ç»œ

### Q: å¦‚ä½•å¤‡ä»½å’Œæ¢å¤æ•°æ®ï¼Ÿ

**A:** æ•°æ®é»˜è®¤åœ¨ `./data/stats.db`ã€‚å…ˆå¤‡ä»½ï¼š

```bash
cp -r ./data ./data-backup-$(date +%Y%m%d)
```

æ¢å¤æ—¶åœæ­¢æœåŠ¡ã€è¦†ç›–æ•°æ®ç›®å½•å†å¯åŠ¨ï¼š

```bash
docker compose down
cp -r ./data-backup-YYYYMMDD/. ./data/
docker compose up -d
```

## ğŸ—ï¸ æ¶æ„æ–‡æ¡£æŒ‡å¼•

å¦‚æœä½ æƒ³å¿«é€Ÿç†è§£ç³»ç»Ÿè®¾è®¡ä¸å®ç°æ·±åº¦ï¼Œå»ºè®®æŒ‰ä¸‹é¢é¡ºåºé˜…è¯»ï¼š

1. **æ•´ä½“æ¶æ„å›¾**ï¼šç«¯åˆ°ç«¯åˆ†å±‚ä¸æ¨¡å—èŒè´£ â†’ [docs/architecture.md](./docs/architecture.md)
2. **æ•°æ®æµè¯¦è§£**ï¼šClash / Surge ä¸¤æ¡é‡‡é›†é“¾è·¯ä¸èšåˆè¿‡ç¨‹
3. **æ•°æ®æ¨¡å‹ä¸å­˜å‚¨**ï¼šSQLite è¡¨ç»“æ„ã€ClickHouse Buffer è¡¨ã€ä¿ç•™ç­–ç•¥
4. **å®æ—¶é€šé“è®¾è®¡**ï¼š`RealtimeStore` åˆå¹¶ç­–ç•¥ä¸ WS æ¨é€æœºåˆ¶
5. **ClickHouse æ¨¡å—**ï¼šåŒå†™æ¶æ„ã€å¥åº·å›é€€ã€è¯»å–è·¯ç”±

å®Œæ•´æ–‡æ¡£ç´¢å¼•ï¼š[docs/README.md](./docs/README.md)

> è¯¥æ–‡æ¡£è¦†ç›–é‡‡é›†ã€èšåˆã€ç¼“å­˜ã€å®æ—¶æ¨é€ä¸å¤šåç«¯ç®¡ç†çš„æ ¸å¿ƒè®¾è®¡ã€‚

## ğŸ¤ åé¦ˆä¸ Issue

æœ¬é¡¹ç›®å·²å¯ç”¨ GitHub Issue æ¨¡æ¿ï¼ˆBug / Feature / Supportï¼‰ã€‚

å»ºè®®æå•æ—¶è‡³å°‘åŒ…å«ï¼š

1. éƒ¨ç½²æ–¹å¼ï¼ˆCompose / Docker Run / æºç ï¼‰
2. ç‰ˆæœ¬ä¿¡æ¯ï¼ˆé•œåƒ tag æˆ– commitï¼‰
3. å…³é”®ç¯å¢ƒå˜é‡ï¼ˆè¯·è„±æ•ï¼Œå¦‚ `COOKIE_SECRET=***`ï¼‰
4. å¤ç°æ­¥éª¤ä¸é¢„æœŸ/å®é™…ç»“æœ
5. å…³é”®æ—¥å¿—ï¼ˆ`docker logs`ã€æµè§ˆå™¨ Consoleã€ç½‘ç»œæŠ¥é”™ï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
neko-master/
â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®
â”œâ”€â”€ Dockerfile              # Docker é•œåƒæ„å»º
â”œâ”€â”€ setup.sh                # ä¸€é”®é…ç½®è„šæœ¬
â”œâ”€â”€ docker-start.sh         # Docker å®¹å™¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start.sh                # æºç å¼€å‘å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docs/                   # æ–‡æ¡£ï¼ˆè§ docs/README.mdï¼‰
â”‚   â”œâ”€â”€ README.md           # æ–‡æ¡£æ€»ç´¢å¼•ï¼ˆä¸­æ–‡ï¼‰
â”‚   â”œâ”€â”€ README.en.md        # æ–‡æ¡£æ€»ç´¢å¼•ï¼ˆè‹±æ–‡ï¼‰
â”‚   â”œâ”€â”€ architecture.md     # ç³»ç»Ÿæ¶æ„ï¼ˆä¸­æ–‡ï¼‰
â”‚   â”œâ”€â”€ architecture.en.md  # ç³»ç»Ÿæ¶æ„ï¼ˆè‹±æ–‡ï¼‰
â”‚   â”œâ”€â”€ release-checklist.md
â”‚   â”œâ”€â”€ agent/              # Agent æ¨¡å¼æ–‡æ¡£ï¼ˆä¸­è‹±æ–‡åŒè¯­ï¼‰
â”‚   â”‚   â”œâ”€â”€ overview.md / overview.en.md
â”‚   â”‚   â”œâ”€â”€ quick-start.md / quick-start.en.md
â”‚   â”‚   â”œâ”€â”€ install.md / install.en.md
â”‚   â”‚   â”œâ”€â”€ config.md / config.en.md
â”‚   â”‚   â”œâ”€â”€ release.md / release.en.md
â”‚   â”‚   â””â”€â”€ troubleshooting.md / troubleshooting.en.md
â”‚   â”œâ”€â”€ research/           # ç ”ç©¶æŠ¥å‘Š
â”‚   â””â”€â”€ dev/                # å†…éƒ¨å¼€å‘æ–‡æ¡£
â”œâ”€â”€ assets/                 # é¢„è§ˆå›¾å’Œå›¾æ ‡
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ collector/          # æ•°æ®æ”¶é›†æœåŠ¡ï¼ˆNode.js + WebSocketï¼‰
â”‚   â”œâ”€â”€ agent/              # Agent å®ˆæŠ¤è¿›ç¨‹ï¼ˆGoï¼‰
â”‚   â””â”€â”€ web/                # Next.js å‰ç«¯åº”ç”¨
â””â”€â”€ packages/
    â””â”€â”€ shared/             # å…±äº«ç±»å‹å®šä¹‰å’Œå·¥å…·
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 16 + React 19 + TypeScript + Tailwind CSS
- **UI ç»„ä»¶**: shadcn/ui
- **æ•°æ®æ”¶é›†**: Node.js + Fastify + WebSocket + SQLiteï¼ˆ+ ClickHouse å¯é€‰ï¼‰
- **å¯è§†åŒ–**: Recharts + D3.js
- **å›½é™…åŒ–**: next-intlï¼ˆä¸­/è‹±ï¼‰
- **éƒ¨ç½²**: Docker + Docker Compose

## ğŸ“„ è®¸å¯è¯

MIT License Â© 2024 [foru17](https://github.com/foru17)

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=foru17/neko-master&type=date&legend=top-left)](https://www.star-history.com/#foru17/neko-master&type=date&legend=top-left)

---

<p align="center">
  å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼
</p>

